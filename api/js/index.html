<!DOCTYPE HTML>
<html>
<head>
    <title>JavaScript api</title>
    <script type="text/javascript" src="SockFTP.js"></script>
    <script>
        
        var uploader = null;
        
        window.addEventListener( 'load', function() {
            
            uploader = new SockFTP( {
                "host": "127.0.0.1",
                "port": 8181,
                "user": "andrei",
                "password": "12345"
            } );
            
            uploader.on( 'log', function( args ) {
                
                args = ( args || [] );

                var logType = args[0] || 'log';

                args = args.slice( 1 );

                document.getElementById( 'console' ).value +=
                    logType +': ' + args.join( ' ' ) + "\n";

                if ( document.getElementById( 'console' ).scrollTop < 1000000 )
                    document.getElementById( 'console' ).scrollTop = 10000000;
                
           } );
            
            uploader.bindTo( document.getElementById( 'uploader' ) );
            
            document.getElementById( 'list' ).addEventListener( 'click', function() {
            
                uploader.ls( document.getElementById( 'path' ).value, function( files ) {
                    console.log( 'LS: ', files );
                }, function( reason ) {
                    console.error('LS Failed: ' + reason );
                } );
            
            }, false );
            
        }, true );
        
    </script>
</head>
<body>
    
    <label>Select file to upload:
        <input type="file" id="uploader" multiple />
    </label>
    
    <br />
    <br />
    <textarea id="console" disabled cols=80 rows=25></textarea><br /><br />

    <label>List: <input id="path" value="/" />
        <button id="list">Go</button>
    </label>
   
</body>
</html>